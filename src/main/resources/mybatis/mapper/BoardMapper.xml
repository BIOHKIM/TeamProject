<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="org.project.dao.BoardDAO">
    <!-- 리스트조회 -->
    <!--    <select id="qnaList" resultType="org.project.vo.BoardVO">-->
    <!--        SELECT * FROM QA-->
    <!--    </select>-->

    <!-- 총 게시글 갯수 출력 -->
    <select id="countBoard" resultType="Integer">
        SELECT COUNT(*) FROM QA
    </select>
    <!-- 리스트 페이징 처리 -->
    <select id="selectBoard" resultType="org.project.vo.BoardVO">
        SELECT *
        FROM (
        SELECT ROWNUM RN, QA.*
        FROM (
        SELECT *
        FROM QA
        ORDER BY QANO ASC
        ) QA
        )
        WHERE RN BETWEEN #{start} AND #{end}
    </select>

    <!-- 게시판 조회수 -->
    <update id="boardCnt" parameterType="Integer">
        UPDATE QA
        SET COUNT = COUNT+1
        WHERE QANo = #{QANo}
    </update>

<!--    &lt;!&ndash; 게시글 상세정보 &ndash;&gt;-->
<!--    <select id="detail" resultType="org.project.vo.BoardVO">-->
<!--        select *-->
<!--        FROM QA-->
<!--        WHERE QANO = #{QANo}-->
<!--    </select>-->

    <!-- 게시글 읽기 -->
    <select id="read" resultType="org.project.vo.BoardVO">
        select *
        FROM QA
        WHERE QANo = #{QANo}
    </select>

    <!-- 게시글 삭제 -->
    <delete id="delete" parameterType="org.project.vo.BoardVO">
        DELETE FROM QA WHERE QANo = #{QANo}
    </delete>
    <!-- 게시글 수정 -->
    <update id="update" parameterType="org.project.dto.BoardWriteDTO">
        UPDATE QA set QANo=#{QANo}, title=#{title}, content=#{content},writedate=sysdate, userno=#{userNo}, writer =#{writer}  where QANo=#{QANo}
    </update>

    <!-- 게시글 쓰기 -->
    <insert id="write" parameterType="org.project.dto.BoardWriteDTO">
        insert into QA(QANO, TITLE, CONTENT, WRITEDATE, USERNO, WRITER)
        values(QANo.NEXTVAL,#{title},#{content},sysdate, #{userNo}, #{writer})
    </insert>


</mapper>